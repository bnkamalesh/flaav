var tttext=function(){var e=$('<span class="point"></span>'),t=null,n=$('<div id="tooltip"></div>'),r=$("html"),i=$(window).outerHeight(true),s=r.outerHeight(true),o={};return{init:function(e){t=this;if(!e)e={};o={type:e.type||"hover",position:e.position||"top",duration:e.duration||300,offset:e.offset||0,horizontal_centre:typeof e.horizontal_centre=="undefined"?true:e.horizontal_centre,vertical_centre:typeof o.vertical_centre=="undefined"?true:e.vertical_centre,condition:typeof o.condition=="function"?o.condition:function(){return true},body_overflow:typeof o.body_overflow=="undefined"?true:o.body_overflow,add_class:e.add_class||""};if($("body #tooltip").length===0)$("body").append(n)},attach:function(e,r){if(!e)return;e.data("type",r.type||o.type);e.data("duration",r.duration||o.duration);e.data("position",r.position||o.position);e.data("offset",r.offset||o.offset);e.data("condition",r.condition||o.condition);e.data("message",r.message);e.data("h_centre",typeof r.horizontal_centre=="undefined"?o.horizontal_centre:r.horizontal_centre);e.data("v_centre",typeof r.vertical_centre=="undefined"?o.vertical_centre:r.vertical_centre);e.data("body_overflow",typeof r.body_overflow=="undefined"?r.body_overflow:o.body_overflow);e.data("add_class",r.add_class||o.add_class);switch(e.data("type")){case"follow":e.mousemove(function(n){e.data("position",n.pageX+"#"+n.pageY);t.show($(this))});e.mouseout(function(){t.hide(type="follow")});break;case"click":e.click(function(){n.hasClass("active")?t.hide():t.show($(this))});break;default:e.hover(function(){t.show($(this))},function(){t.hide()})}return e},show:function(t){if(!t.data("condition").call())return t;var o=t.offset(),u=o.left,a=o.top,f=t.data("type"),l=f=="follow"?f:t.data("position");n.html(t.data("message")).append(e).attr("class","active "+l+" "+t.data("add_class"));switch(t.data("position")){case"left":u-=n.outerWidth(true)+t.data("offset");if(t.data("v_centre")){var c=t.outerHeight(true)-parseInt(t.css("margin-bottom"));c=c/2-n.outerHeight(true)/2;if(c<0)c*=-1;a+=c}else a+=parseInt(t.css("padding-top"))-parseInt(n.css("padding-top"));break;case"top":a-=n.outerHeight(true)+t.data("offset");t.data("h_centre")===true?u+=(t.outerWidth(true)-(parseInt(t.css("margin-left"))+parseInt(t.css("margin-right")))-n.outerWidth(true))/2:u-=n.outerWidth(true)/2;break;case"right":u+=t.outerWidth(true)-parseInt(t.css("margin-right"))+t.data("offset");if(t.data("v_centre")){var c=t.outerHeight(true)-parseInt(t.css("margin-bottom"));c=c/2-n.outerHeight(true)/2;if(c<0)c*=-1;a+=c}else a+=parseInt(t.css("padding-top"))-parseInt(n.css("padding-top"));break;default:var h=t.data("position").split("#");if(h[1]){u=parseInt(h[0])+5;a=parseInt(h[1])+5}else{u=t.data("h_centre")?u+=t.outerWidth(true)/2-n.outerWidth(true)/2:u;a+=t.outerHeight(true)-parseInt(t.css("margin-bottom"))+t.data("offset")}}n.css("left",u<0?0:u);n.css("top",a<0?0:a);e.css("left",n.outerWidth(true)/2-e.outerWidth(true)/2);if(i>s&&t.data("body_overflow")===false)r.addClass("no-overflow");f=="follow"?n.stop(true,true).fadeIn(t.data("duration")):n.stop(true,true).fadeIn(t.data("duration"))},hide:function(e){r.removeClass("no-overflow");var t=e=="follow"?false:true;n.stop(t,t).fadeOut(o.duration).removeClass("active")}}}();